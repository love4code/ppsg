<div class="d-flex justify-content-between align-items-center mb-4">
    <h2><i class="bi bi-image"></i> Media Details</h2>
    <div class="d-flex gap-2">
        <a href="/admin/media/<%= media._id %>/edit" class="btn btn-primary">
            <i class="bi bi-pencil"></i> Edit
        </a>
        <a href="/admin/media" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to Media Library
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-body text-center">
                <img src="/admin/media/image/<%= media._id %>/large" class="img-fluid rounded" alt="<%= media.altText || media.title || media.originalFilename %>">
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Image Information</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label fw-bold">Filename:</label>
                    <p class="mb-0"><%= media.originalFilename %></p>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Title:</label>
                    <p class="mb-0"><%= media.title || '<span class="text-muted">Not set</span>' %></p>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Alt Text:</label>
                    <p class="mb-0"><%= media.altText || '<span class="text-muted">Not set</span>' %></p>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Description:</label>
                    <p class="mb-0"><%= media.description || '<span class="text-muted">Not set</span>' %></p>
                </div>
                
                <% if (media.metadata && Object.keys(media.metadata).length > 0) { %>
                <div class="mb-3">
                    <label class="form-label fw-bold">Metadata:</label>
                    <ul class="list-unstyled mb-0">
                        <% Object.entries(media.metadata).forEach(([key, value]) => { %>
                            <li><strong><%= key %>:</strong> <%= value %></li>
                        <% }); %>
                    </ul>
                </div>
                <% } %>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Uploaded:</label>
                    <p class="mb-0"><%= new Date(media.createdAt).toLocaleString() %></p>
                </div>
            </div>
        </div>
        
        <!-- Image Size Links -->
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">Image URLs (Click to Copy)</h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label fw-bold">Small (300px width):</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="url-small" value="<%= req.protocol %>://<%= req.get('host') %>/admin/media/image/<%= media._id %>/small" readonly>
                        <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('url-small')">
                            <i class="bi bi-clipboard"></i> Copy
                        </button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Medium (800px width):</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="url-medium" value="<%= req.protocol %>://<%= req.get('host') %>/admin/media/image/<%= media._id %>/medium" readonly>
                        <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('url-medium')">
                            <i class="bi bi-clipboard"></i> Copy
                        </button>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Large (1200px width):</label>
                    <div class="input-group">
                        <input type="text" class="form-control" id="url-large" value="<%= req.protocol %>://<%= req.get('host') %>/admin/media/image/<%= media._id %>/large" readonly>
                        <button class="btn btn-outline-secondary" type="button" onclick="copyToClipboard('url-large')">
                            <i class="bi bi-clipboard"></i> Copy
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function copyToClipboard(inputId) {
    const input = document.getElementById(inputId);
    input.select();
    input.setSelectionRange(0, 99999); // For mobile devices
    
    try {
        document.execCommand('copy');
        
        // Show feedback
        const button = input.nextElementSibling;
        const originalHTML = button.innerHTML;
        button.innerHTML = '<i class="bi bi-check"></i> Copied!';
        button.classList.add('btn-success');
        button.classList.remove('btn-outline-secondary');
        
        setTimeout(() => {
            button.innerHTML = originalHTML;
            button.classList.remove('btn-success');
            button.classList.add('btn-outline-secondary');
        }, 2000);
    } catch (err) {
        // Fallback for modern browsers
        navigator.clipboard.writeText(input.value).then(() => {
            const button = input.nextElementSibling;
            const originalHTML = button.innerHTML;
            button.innerHTML = '<i class="bi bi-check"></i> Copied!';
            button.classList.add('btn-success');
            button.classList.remove('btn-outline-secondary');
            
            setTimeout(() => {
                button.innerHTML = originalHTML;
                button.classList.remove('btn-success');
                button.classList.add('btn-outline-secondary');
            }, 2000);
        });
    }
}
</script>

